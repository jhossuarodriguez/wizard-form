<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form Wizard</title>
    <link rel="stylesheet" href="input.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos para transiciones suaves */
        .question-transition {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        .question-hidden {
            opacity: 0;
            max-height: 0 !important;
            margin-top: 0 !important;
            margin-bottom: 0 !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            transform: translateY(-10px);
            pointer-events: none;
        }

        .question-visible {
            opacity: 1;
            max-height: 1000px;
            margin-top: 1.25rem;
            margin-bottom: 0;
            transform: translateY(0);
        }

        /* Transición para formularios */
        .form-step {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }

        .form-step.hidden {
            opacity: 0;
            transform: translateX(-20px);
            pointer-events: none;
            position: absolute;
        }

        .form-step:not(.hidden) {
            opacity: 1;
            transform: translateX(0);
            position: relative;
        }

        /* Animación de entrada suave */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-in {
            animation: slideIn 0.5s ease-out forwards;
        }

        /* Estilos para los indicadores de pasos */
        .step {
            transition: all 0.3s ease;
            cursor: default;
        }

        .step.active {
            background-color: white;
            color: #536de5;
            border-bottom: 3px solid #536de5;
            font-weight: 600;
        }

        .step:not(.active) {
            background-color: #f3f4f6;
            color: #6b7280;
            border-bottom: 3px solid transparent;
        }

        .step-connector {
            transition: background-color 0.3s ease;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen flex items-center justify-center px-4">

    <div class="w-full max-w-[1467px] h-auto bg-white shadow-md rounded-2xl p-8">
        <!-- Section indicators -->
        <div class="flex items-stretch mb-10 border-b border-gray-200">
            <div id="step1"
                class="step flex-1 py-4 px-6 text-center text-sm bg-white text-[#536de5] border-b-[3px] border-[#536de5] font-semibold">
                Información General
            </div>
            <div id="step2"
                class="step flex-1 py-4 px-6 text-center text-sm bg-gray-100 text-gray-600 border-b-[3px] border-transparent">
                Interacción Familiar y/o Social
            </div>
            <div id="step3"
                class="step flex-1 py-4 px-6 text-center text-sm bg-gray-100 text-gray-600 border-b-[3px] border-transparent">
                Interacción en la Escuela
            </div>
            <div id="step4"
                class="step flex-1 py-4 px-6 text-center text-sm bg-gray-100 text-gray-600 border-b-[3px] border-transparent">
                Interacción en la Comunidad
            </div>
        </div>

        <!-- Form 1 -->
        <form id="form1" class="form-step space-y-10">
            <h2 class="text-xl font-semibold mb-6 ">Información General</h2>

            <!-- Pregunta 1-->
            <div>
                <h2 class="block text-lg font-medium">1. ¿Cuál es el motivo de consulta? <span
                        class="text-red-500">*</span>
                </h2>

                <textarea name="motivoConsulta" id="motivoConsulta"
                    class="w-[550px] mt-5 border rounded-md p-2 focus:ring-[#536de5] focus:border-[#536de5] outline-none text-black"
                    rows="2" maxlength="500" placeholder="Motivo de la consulta"></textarea>
            </div>

            <!-- Pregunta 2-->
            <div id="pregunta2">
                <label class="block text-lg font-medium" for="">2. ¿Ha sido referido para evaluación del desarrollo y
                    diagnostico? <span class="text-red-500">*</span>
                </label>
                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="referido" value="si" onchange="handlePregunta2(this)">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="referido" value="no" onchange="handlePregunta2(this)">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!-- Pregunta 3-->
            <div id="pregunta3" class="question-transition question-hidden">
                <label class="block text-lg font-medium">3. ¿Quién es la persona o entidad que realiza el
                    referimiento o recomendación? <span class="text-red-500">*</span></label>
                <input
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none"
                    type="text" name="persona_referimiento" placeholder="Ingrese nombre">
            </div>

            <!-- Pregunta 4-->
            <div id="pregunta4">
                <label class="block text-lg font-medium">4. ¿Tiene el niño un diagnostico previo? <span
                        class="text-red-500">*</span></label>
                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="diagnostico_previo" value="si" onchange="handlePregunta4(this)">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="diagnostico_previo" value="no" onchange="handlePregunta4(this)">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!-- Pregunta 5-->
            <div id="pregunta5" class="question-transition question-hidden">
                <label class="block text-lg font-medium">5. ¿Cuál es el diagnóstico previo? <span
                        class="text-red-500">*</span></label>
                <input
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none"
                    type="text" name="cual_diagnostico" value="" placeholder="Ingrese diagnóstico">
            </div>

            <!-- Pregunta 6-->
            <div id="pregunta6" class="question-transition question-hidden">
                <label class="block text-lg font-medium">6. ¿Cuál fue el centro profesional que realizó el
                    diagnóstico? <span class="text-red-500">*</span></label>
                <input
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none"
                    type="text" name="centro_profesional" value="" placeholder="Ingrese nombre del centro">
            </div>

            <!-- Pregunta 7-->
            <div id="pregunta7">
                <label class="block text-lg font-medium">7. ¿El niño recibe o ha recibido intervención
                    terapéutica? <span class="text-red-500">*</span></label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="intervencion_terapeutica" value="si" onchange="handlePregunta7(this)">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="intervencion_terapeutica" value="no" onchange="handlePregunta7(this)">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!-- Pregunta 8-->
            <div id="pregunta8" class="max-w-4xl text-xs md:text-base question-transition question-hidden">
                <h2 class="block text-lg font-medium"> 8. ¿Cuáles terapias recibe o ha recibido? <span
                        class="text-red-500">*</span>
                </h2>
                <div class="flex flex-col space-y-5">
                    <div class="w-full flex flex-row justify-between items-center gap-x-5 mt-5">
                        <div class="flex flex-row justify-start items-center space-x-2 flex-1">
                            <input type="checkbox" name="terapia_habla_lenguaje" id="hablaLenguaje">
                            <label>Terapia de habla y del lenguaje</label>
                        </div>
                        <div class="flex flex-row justify-start items-center space-x-2 flex-1">
                            <input type="checkbox" name="terapia_intervencion_conductual" id="intervencionConductual">
                            <label>Intervención conductual</label>
                        </div>
                        <div class="flex flex-row justify-start items-center space-x-2 flex-1">
                            <input type="checkbox" name="terapia_ocupacional" id="ocupacional">
                            <label>Terapia ocupacional</label>
                        </div>
                    </div>
                    <div class="w-full flex flex-row justify-between items-center gap-x-5">
                        <div class="flex flex-row justify-start items-center space-x-2 flex-1">
                            <input type="checkbox" name="apoyo_psicopedagogico" id="psicopedagogico">
                            <label>Apoyo psicopedagógico</label>
                        </div>
                        <div class="flex flex-row justify-start items-center space-x-2 flex-1">
                            <input type="checkbox" name="atencion_temprana" id="atencionTemprana">
                            <label>Atención e intervención temprana</label>
                        </div>
                        <div class="flex flex-row justify-start items-center space-x-2 flex-1">
                            <input type="checkbox" name="terapia_fisica_psicomotora" id="fisicaPsicomotora">
                            <label>Terapia física y psicomotora</label>
                        </div>
                    </div>
                    <div class="w-full flex flex-row justify-between items-center gap-x-5">
                        <div class="flex flex-row justify-start items-center space-x-2 flex-1">
                            <input type="checkbox" name="terapia_alimentaria" id="alimentaria">
                            <label>Terapia alimentaria</label>
                        </div>
                        <div class="flex flex-row justify-start items-center space-x-2 flex-1">
                            <input type="checkbox" name="terapia_artistica" id="artistica">
                            <label>Terapia artística</label>
                        </div>
                        <div class="flex flex-row justify-start items-center space-x-2 flex-1">
                            <!-- Espacio vacío para mantener alineación -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pregunta 9-->
            <div id="pregunta9" class="question-transition question-hidden">
                <label class="block text-lg font-medium">9. ¿Cuánto tiempo de duración tiene o estuvo en
                    terapias? <span class="text-red-500">*</span></label>
                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="duracion_terapias" value="mes">
                        <span>Meses</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="duracion_terapias" value="años">
                        <span>Años</span>
                    </label>
                </div>
            </div>

            <!-- Pregunta 10-->
            <div id="pregunta10" class="question-transition question-hidden">
                <label class="block text-lg font-medium">10. ¿Dónde recibe o ha recibido terapia? <span
                        class="text-red-500">*</span></label>
                <input
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none"
                    type="text" placeholder="Ingrese nombre">
            </div>

            <!-- Pregunta 11-->
            <div id="pregunta11" class="question-transition question-hidden">
                <label class="block text-lg font-medium"> 11. ¿Cuándo fue la última terapia? <span
                        class="text-red-500">*</span></label>
                </label>
                <input class="p-2 border rounded-md mt-5" type="date" name="ultimaTerapia" id="ultimaTerapia">
            </div>
        </form>

        <form id="form2" class="form-step hidden space-y-10">
            <h2 class="text-lg font-semibold mb-6">Interacción Familiar y/o Social</h2>


            <!--Pregunta 12-->
            <!--Cargar desde ViewBag-->
            <div id="pregunta12">
                <label class="block text-lg font-medium">12. ¿Con quién reside el niño? <span
                        class="text-red-500">*</span></label>
                <select class="border p-2 rounded-md mt-5" name="nucleoFamiliar" id="nucleoFamiliar"
                    onchange="handlePregunta12(this)">
                    <option value="">Seleccione una opción</option>
                    <option value="padres">Ambos padres</option>
                    <option value="madre">Solo madre</option>
                    <option value="padre">Solo padre</option>
                    <option value="abuelos">Abuelos</option>
                    <option value="otros">Otros familiares</option>
                </select>

                <input id="otroNucleoFamiliarInput" type="text" name="otro_nucleo_familiar" placeholder="Especifique"
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none question-transition question-hidden">
            </div>

            <!--Pregunta 13-->
            <div>
                <label class="block text-lg font-medium">13. ¿Tiene el niño uno de sus progenitores
                    fallecidos? <span class="text-red-500">*</span></label>
                <select class="border p-2 rounded-md mt-5" name="nucleoFamiliar" id="nucleoFamiliar">
                    <option value="1" selected>Seleccione una opción</option>
                    <option value="Madre">Madre</option>
                    <option value="Padre">Padre</option>
                    <option value="Ambos">Ambos</option>
                    <option value="Ninguno">Ninguno</option>
                </select>
            </div>

            <!--Pregunta 14-->
            <!--Cargar desde ViewBag-->
            <div>
                <label class="block text-lg font-medium">14. ¿Ha sido abandonado el niño por uno de sus
                    progenitores? <span class="text-red-500">*</span></label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="abandonado_progenitor" value="si">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="abandonado_progenitor" value="no">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!--Preguntas 15-->
            <!--Cargar desde ViewBag-->
            <div>
                <label class="block text-lg font-medium">15. ¿Cómo describiría la dinámica entre los padres?</label>
                <select class="border p-2 rounded-md mt-5" name="dinamicaPadres" id="dinamicaPadres">
                    <option value="">Seleccione una opción</option>
                    <option value="muy_buena">Muy buena</option>
                    <option value="buena">Buena</option>
                    <option value="regular">Regular</option>
                    <option value="mala">Mala</option>
                    <option value="muy_mala">Muy mala</option>
                </select>
            </div>

            <!--Pregunta 16-->
            <div>
                <h2 class="block text-lg font-medium">16. ¿Quién cuida al niño?</h2>
                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="quien_cuida" value="padre" onchange="handlePregunta16(this)">
                        <span>Padre</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="quien_cuida" value="madre" onchange="handlePregunta16(this)">
                        <span>Madre</span>
                    </label>
                    <label class="radio">
                        <input type="radio" name="quien_cuida" value="otro" onchange="handlePregunta16(this)">
                        <span>Otro</span>
                    </label>
                </div>

                <input id="otroCuidadorInput" type="text" name="otroCuidador" placeholder="Especifique"
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none question-transition question-hidden">
            </div>

            <!--Pregunta 17-->
            <!--Cargar desde ViewBag-->
            <div>
                <label class="block text-lg font-medium">17. ¿Cómo es la relación del niño con el cuidador
                    principal?</label>
                <select class="border p-2 rounded-md mt-5" name="relacionCuidador" id="relacionCuidador">
                    <option value="">Seleccione una opción</option>
                    <option value="excelente">Excelente</option>
                    <option value="muy_buena">Muy buena</option>
                    <option value="buena">Buena</option>
                    <option value="regular">Regular</option>
                    <option value="mala">Mala</option>
                </select>
            </div>

            <!--Pregunta 18-->
            <div id="pregunta18">
                <label class="block text-lg font-medium">18. ¿Participa el niño en actividades con la
                    familia?
                </label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="participa_familia" value="si" onchange="handlePregunta18(this)">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="participa_familia" value="no" onchange="handlePregunta18(this)">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 19-->
            <div id="pregunta19" class="question-transition question-hidden">
                <label class="block text-lg font-medium">19. ¿Con qué frecuencia?</label>
                <select class="border p-2 rounded-md mt-5" name="frecuencia_participacion">
                    <option value="">Seleccione una opción</option>
                    <option value="pocas veces">Pocas veces</option>
                    <option value="casi siempre">Casi siempre</option>
                    <option value="siempre">Siempre</option>
                </select>
            </div>

            <!--Pregunta 20-->
            <div id="pregunta20">
                <label class="block text-lg font-medium">20. ¿Tiene el niño hermanos?
                </label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="tiene_hermanos" value="si">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="tiene_hermanos" value="no">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 21-->
            <div>
                <label class="block text-lg font-medium">21. ¿Es capaz el niño de seguir instrucciones?
                </label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="seguir_instrucciones" value="si">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="seguir_instrucciones" value="no">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 22-->
            <!--Cargar desde ViewBag-->
            <div id="pregunta22">
                <label class="block text-lg font-medium">22. ¿Con quién duerme el niño?</label>
                <select class="border p-2 rounded-md mt-5" name="duermecon" id="duermecon"
                    onchange="handlePregunta22(this)">
                    <option value="">Seleccione una opción</option>
                    <option value="solo">Solo en su cuarto</option>
                    <option value="padres">Con los padres</option>
                    <option value="hermanos">Con hermanos</option>
                    <option value="otros">Con otros familiares</option>
                </select>

                <input id="otroDuermeConInput" type="text" name="otro_duerme_con" placeholder="Especifique"
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none question-transition question-hidden">
            </div>

            <!--Pregunta 23-->
            <!--Cargar desde ViewBag-->
            <div id="pregunta23">
                <label class="block text-lg font-medium">23. En el último año ¿Ha habido cambios significativos en
                    la vida del niño?</label>
                <select class="border p-2 rounded-md mt-5" name="cambiosSignificativos" id="cambiosSignificativos"
                    onchange="handlePregunta23(this)">
                    <option value="">Seleccione una opción</option>
                    <option value="ninguno">Ningún cambio</option>
                    <option value="mudanza">Mudanza</option>
                    <option value="cambio_escuela">Cambio de escuela</option>
                    <option value="separacion_padres">Separación de padres</option>
                    <option value="nacimiento_hermano">Nacimiento de hermano</option>
                    <option value="fallecimiento">Fallecimiento familiar</option>
                    <option value="otros">Otros</option>
                </select>

                <input id="otroCambiosInput" type="text" name="otro_cambios" placeholder="Especifique"
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none question-transition question-hidden">
            </div>
        </form>

        <form id="form3" class="form-step hidden space-y-10">
            <h2 class="text-xl font-semibold mb-6">Interacción en la Escuela</h2>

            <!--Pregunta 24-->
            <div id="pregunta24">
                <label class="block text-lg font-medium">24. ¿Asiste el niño a la escuela?</label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="asiste_escuela" value="si" onchange="handlePregunta24(this)">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="asiste_escuela" value="no" onchange="handlePregunta24(this)">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 25-->
            <div id="pregunta25" class="question-transition question-hidden">
                <label class="block text-lg font-medium"> 25. ¿Asiste el niño a un centro de cuidado o estancia
                    infantil?
                </label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="asiste_centro_cuidado" value="si" onchange="handlePregunta25(this)">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="asiste_centro_cuidado" value="no" onchange="handlePregunta25(this)">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 26-->
            <div id="pregunta26" class="question-transition question-hidden">
                <label class="block text-lg font-medium">
                    26. ¿A qué edad ingresó a la escuela?
                </label>
                <input
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none"
                    type="number" name="edad_ingreso_escuela" placeholder="Ingrese edad">
            </div>

            <!--Pregunta 27-->
            <div>
                <label class="block text-lg font-medium mt-5">
                    27. Nombre del centro educativo
                </label>
                <input
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none"
                    type="text" placeholder="Ingrese nombre">
            </div>

            <!--Pregunta 28-->
            <div>
                <label class="block text-lg font-medium mt-5">
                    28. Curso actual
                </label>
                <input
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none"
                    type="text" placeholder="Ingrese nombre">
            </div>

            <!--Pregunta 29-->
            <div id="pregunta29">
                <h2 class="block text-lg font-medium mt-5">
                    29. Tipo de centro educativo
                </h2>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="tipo_centro_educativo" value="publico"
                            onchange="handlePregunta29(this)">
                        <span>Público</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="tipo_centro_educativo" value="privado"
                            onchange="handlePregunta29(this)">
                        <span>Privado</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="tipo_centro_educativo" value="otro" onchange="handlePregunta29(this)">
                        <span>Otro</span>
                    </label>
                </div>

                <input id="otroCentroEducativoInput" type="text" name="otro_centro_educativo" placeholder="Especifique"
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none question-transition question-hidden">
            </div>

            <!--Pregunta 30-->
            <div id="pregunta30">
                <h2 class="block text-lg font-medium mt-5">
                    30. Características del centro
                </h2>

                <select class="p-2 border rounded-md mt-5" name="caracteristicasCentro" id="caracteristicasCentro"
                    onchange="handlePregunta30(this)">
                    <option value="" selected>Seleccione una opción</option>
                    <option value="escuela_regular">Escuela regular</option>
                    <option value="escuela_especial">Escuela especial</option>
                    <option value="aula_recursos">Aula de recursos</option>
                    <option value="otro">Otro</option>
                </select>

                <input id="otroCaracteristicasInput" type="text" name="otro_caracteristicas" placeholder="Especifique"
                    class="w-[250px] rounded-md p-2 border mt-5 focus:ring-[#536de5] focus:border-[#536de5] outline-none question-transition question-hidden">
            </div>

            <!--Pregunta 31-->
            <div>
                <h2 class="block text-lg font-medium mt-5">
                    31. ¿Cómo se dio el proceso de adaptación al centro educativo o
                    sala de tarea?
                </h2>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="adaptacion_centro" value="conDificultad">
                        <span>Con dificultad</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="adaptacion_centro" value="sinDificultad">
                        <span>Sin dificultad</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 32-->
            <div>
                <h2 class="block text-lg font-medium mt-5">
                    32. ¿Cómo calificaría la experiencia escolar del niño?
                </h2>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="experiencia_escolar" value="excelente">
                        <span>Excelente</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="experiencia_escolar" value="bueno">
                        <span>Bueno</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="experiencia_escolar" value="regular">
                        <span>Regular</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="experiencia_escolar" value="deficiente">
                        <span>Deficiente</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 33-->
            <div>
                <h2 class="block text-lg font-medium mt-5">
                    33. ¿Cómo percibe el apoyo que le dan los maestros y el centro
                    educativo a su hijo?
                </h2>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="apoyo_maestros" value="excelente">
                        <span>Excelente</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="apoyo_maestros" value="bueno">
                        <span>Bueno</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="apoyo_maestros" value="regular">
                        <span>Regular</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="apoyo_maestros" value="deficiente">
                        <span>Deficiente</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 34-->
            <div>
                <h2 class="block text-lg font-medium mt-5">
                    34. ¿Cómo es considerado por los maestros el desempeño del
                    niño en el aula?
                </h2>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="desempeno_aula" value="excelente">
                        <span>Excelente</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="desempeno_aula" value="bueno">
                        <span>Bueno</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="desempeno_aula" value="regular">
                        <span>Regular</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="desempeno_aula" value="deficiente">
                        <span>Deficiente</span>
                    </label>
                </div>
            </div>
        </form>

        <form id="form4" class="form-step hidden space-y-10">
            <h2 class="text-xl font-semibold mb-6">Interacción en la Comunidad</h2>

            <!--Pregunta 35-->
            <div>
                <label class="block text-lg font-medium space-y-10">35. ¿Asiste el niño a sala de tarea?</label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="asiste_sala_tarea" value="si">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="asiste_sala_tarea" value="no">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 36-->
            <div>
                <label class="block text-lg font-medium">
                    36. ¿Se relaciona e integra a las actividades con otros niños?
                </label>
                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="se_relaciona_ninos" value="Siempre">
                        <span>Siempre</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="se_relaciona_ninos" value="La mayor parte del tiempo">
                        <span>La mayor parte del tiempo</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="se_relaciona_ninos" value="A veces">
                        <span>A veces</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="se_relaciona_ninos" value="Permanece aislado">
                        <span>Permanece aislado</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 37-->
            <div>
                <label class="block text-lg font-medium space-y-10">
                    37. ¿Participa el niño de actividades en su comunidad?
                </label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="participa_comunidad" value="si">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="participa_comunidad" value="no">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 38-->
            <div>
                <label class="block text-lg font-medium space-y-10">
                    38. ¿De qué forma sus vecinos o amigos interactúan con el niño?
                </label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="interaccion_vecinos" value="Lo Integran">
                        <span>Lo integran</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="interaccion_vecinos" value="Lo rechazan">
                        <span>Lo rechazan</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="interaccion_vecinos" value="Indiferente">
                        <span>Indiferente</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 39-->
            <div>
                <label class="block text-lg font-medium space-y-10">
                    39. ¿Se ha sentido el niño o la familia excluida de actividades en
                    la comunidad?
                </label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="familia_excluida" value="si">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="familia_excluida" value="no">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <!--Pregunta 40-->
            <div id="pregunta40">
                <label class="block text-lg font-medium space-y-10">
                    40. ¿Cuenta la familia con red de apoyo?
                </label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="cuenta_red_apoyo" value="si" onchange="handlePregunta40(this)">
                        <span>Sí</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="cuenta_red_apoyo" value="no" onchange="handlePregunta40(this)">
                        <span>No</span>
                    </label>
                </div>
            </div>


            <!--Pregunta 41-->
            <div id="pregunta41" class="question-transition question-hidden">
                <label class="block text-lg font-medium">
                    41. ¿Con qué tipo de red de apoyo cuenta la familia?
                </label>

                <div class="flex flex-row gap-x-5 mt-5">
                    <label class="radio">
                        <input type="radio" name="tipo_red_apoyo" value="Primaria">
                        <span>Primaria</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="tipo_red_apoyo" value="Secundaria">
                        <span>Secundaria</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="tipo_red_apoyo" value="Formal">
                        <span>Formal</span>
                    </label>
                </div>
            </div>

            <!--Comentario adicional-->
            <textarea name="comentario" id="comentario"
                class="w-[550px] mt-5 border rounded-md p-2 focus:ring-[#536de5] focus:border-[#536de5] outline-none text-black"
                rows="2" maxlength="500" placeholder="Comentario"></textarea>

        </form>

        <!-- Buttons -->
        <div class="flex justify-between pt-6 w-60 mx-auto">
            <button id="prevBtn"
                class="px-6 py-2 rounded-full bg-[#536de5] text-white font-medium shadow hover:bg-[#536de5]/90 transition">
                Atras
            </button>
            <button id="nextBtn"
                class="px-6 py-2 rounded-full bg-[#536de5] text-white font-medium shadow hover:bg-[#536de5]/90 transition">
                Continuar
            </button>
        </div>
    </div>
    <script>
        let currentStep = 4;
        const totalSteps = 4;

        // FUNCIONES PARA LÓGICA CONDICIONAL

        // Función para la pregunta 2: Si "Sí" → pregunta 3, Si "No" → pregunta 4
        function handlePregunta2(radio) {
            const pregunta3 = document.getElementById('pregunta3');

            if (radio.value === 'si') {
                pregunta3.classList.remove('question-hidden');
                pregunta3.classList.add('question-visible', 'fade-in-up');
            } else {
                pregunta3.classList.remove('question-visible', 'fade-in-up');
                pregunta3.classList.add('question-hidden');
                // Limpiar el campo de la pregunta 3 si se oculta
                setTimeout(() => {
                    const input3 = pregunta3.querySelector('input[name="persona_referimiento"]');
                    if (input3) input3.value = '';
                }, 300);
            }
        }

        // Función para la pregunta 4: Si "Sí" → preguntas 5-6, Si "No" → pregunta 7
        function handlePregunta4(radio) {
            const pregunta5 = document.getElementById('pregunta5');
            const pregunta6 = document.getElementById('pregunta6');

            if (radio.value === 'si') {
                // Mostrar pregunta 5
                pregunta5.classList.remove('question-hidden');
                pregunta5.classList.add('question-visible', 'fade-in-up');

                // Mostrar pregunta 6 con un pequeño delay
                setTimeout(() => {
                    pregunta6.classList.remove('question-hidden');
                    pregunta6.classList.add('question-visible', 'fade-in-up');
                }, 150);
            } else {
                pregunta5.classList.remove('question-visible', 'fade-in-up');
                pregunta5.classList.add('question-hidden');
                pregunta6.classList.remove('question-visible', 'fade-in-up');
                pregunta6.classList.add('question-hidden');

                // Limpiar los campos de las preguntas 5-6 si se ocultan
                setTimeout(() => {
                    const input5 = pregunta5.querySelector('input[name="cual_diagnostico"]');
                    const input6 = pregunta6.querySelector('input[name="centro_profesional"]');
                    if (input5) input5.value = '';
                    if (input6) input6.value = '';
                }, 300);
            }
        }

        // Función para la pregunta 7: Si "Sí" → preguntas 8-11, Si "No" → habilitar continuar
        function handlePregunta7(radio) {
            const pregunta8 = document.getElementById('pregunta8');
            const pregunta9 = document.getElementById('pregunta9');
            const pregunta10 = document.getElementById('pregunta10');
            const pregunta11 = document.getElementById('pregunta11');

            if (radio.value === 'si') {
                // Mostrar preguntas con delays escalonados para efecto suave
                pregunta8.classList.remove('question-hidden');
                pregunta8.classList.add('question-visible', 'fade-in-up');

                setTimeout(() => {
                    pregunta9.classList.remove('question-hidden');
                    pregunta9.classList.add('question-visible', 'fade-in-up');
                }, 150);

                setTimeout(() => {
                    pregunta10.classList.remove('question-hidden');
                    pregunta10.classList.add('question-visible', 'fade-in-up');
                }, 300);

                setTimeout(() => {
                    pregunta11.classList.remove('question-hidden');
                    pregunta11.classList.add('question-visible', 'fade-in-up');
                }, 450);
            } else {
                // Ocultar todas las preguntas
                [pregunta8, pregunta9, pregunta10, pregunta11].forEach(pregunta => {
                    pregunta.classList.remove('question-visible', 'fade-in-up');
                    pregunta.classList.add('question-hidden');
                });

                // Limpiar los campos de las preguntas 8-11 si se ocultan
                setTimeout(() => {
                    const checkboxes8 = pregunta8.querySelectorAll('input[type="checkbox"]');
                    checkboxes8.forEach(cb => cb.checked = false);

                    const radios9 = pregunta9.querySelectorAll('input[type="radio"]');
                    radios9.forEach(rb => rb.checked = false);

                    const input10 = pregunta10.querySelector('input');
                    if (input10) input10.value = '';

                    const input11 = pregunta11.querySelector('input');
                    if (input11) input11.value = '';
                }, 300);
            }
        }

        // Función para la pregunta 12: Si "Otros" → mostrar campo de texto
        function handlePregunta12(select) {
            const otroNucleoFamiliarInput = document.getElementById('otroNucleoFamiliarInput');

            if (select.value === 'otros') {
                otroNucleoFamiliarInput.classList.remove('question-hidden');
                otroNucleoFamiliarInput.classList.add('question-visible', 'fade-in-up');
            } else {
                otroNucleoFamiliarInput.classList.remove('question-visible', 'fade-in-up');
                otroNucleoFamiliarInput.classList.add('question-hidden');
                otroNucleoFamiliarInput.value = '';
            }
        }

        // Función para la pregunta 16: Mostrar campo "Otro" si selecciona "otro"
        function handlePregunta16(radio) {
            const otroCuidadorInput = document.getElementById('otroCuidadorInput');

            if (radio.value === 'otro') {
                otroCuidadorInput.classList.remove('question-hidden');
                otroCuidadorInput.classList.add('question-visible', 'fade-in-up');
            } else {
                otroCuidadorInput.classList.remove('question-visible', 'fade-in-up');
                otroCuidadorInput.classList.add('question-hidden');
                otroCuidadorInput.value = '';
            }
        }

        // Función para la pregunta 22: Si "Otros" → mostrar campo de texto
        function handlePregunta22(select) {
            const otroDuermeConInput = document.getElementById('otroDuermeConInput');

            if (select.value === 'otros') {
                otroDuermeConInput.classList.remove('question-hidden');
                otroDuermeConInput.classList.add('question-visible', 'fade-in-up');
            } else {
                otroDuermeConInput.classList.remove('question-visible', 'fade-in-up');
                otroDuermeConInput.classList.add('question-hidden');
                otroDuermeConInput.value = '';
            }
        }

        // Función para la pregunta 23: Si "Otros" → mostrar campo de texto
        function handlePregunta23(select) {
            const otroCambiosInput = document.getElementById('otroCambiosInput');

            if (select.value === 'otros') {
                otroCambiosInput.classList.remove('question-hidden');
                otroCambiosInput.classList.add('question-visible', 'fade-in-up');
            } else {
                otroCambiosInput.classList.remove('question-visible', 'fade-in-up');
                otroCambiosInput.classList.add('question-hidden');
                otroCambiosInput.value = '';
            }
        }

        // Función para la pregunta 18: Si "Sí" → pregunta 19, Si "No" → pregunta 20
        function handlePregunta18(radio) {
            const pregunta19 = document.getElementById('pregunta19');

            if (radio.value === 'si') {
                pregunta19.classList.remove('question-hidden');
                pregunta19.classList.add('question-visible', 'fade-in-up');
            } else {
                pregunta19.classList.remove('question-visible', 'fade-in-up');
                pregunta19.classList.add('question-hidden');

                // Limpiar el campo de la pregunta 19 si se oculta
                setTimeout(() => {
                    const select19 = pregunta19.querySelector('select[name="frecuencia_participacion"]');
                    if (select19) select19.value = '';
                }, 300);
            }
        }

        // Función para la pregunta 24: Si "Sí" → pregunta 25, Si "No" → pregunta 26
        function handlePregunta24(radio) {
            const pregunta25 = document.getElementById('pregunta25');
            const pregunta26 = document.getElementById('pregunta26');

            if (radio.value === 'si') {
                // Mostrar pregunta 25, ocultar pregunta 26
                pregunta25.classList.remove('question-hidden');
                pregunta25.classList.add('question-visible', 'fade-in-up');

                pregunta26.classList.remove('question-visible', 'fade-in-up');
                pregunta26.classList.add('question-hidden');

                setTimeout(() => {
                    const input26 = pregunta26.querySelector('input[name="edad_ingreso_escuela"]');
                    if (input26) input26.value = '';
                }, 300);
            } else {
                // Mostrar pregunta 26, ocultar pregunta 25
                pregunta26.classList.remove('question-hidden');
                pregunta26.classList.add('question-visible', 'fade-in-up');

                pregunta25.classList.remove('question-visible', 'fade-in-up');
                pregunta25.classList.add('question-hidden');

                setTimeout(() => {
                    const radios25 = pregunta25.querySelectorAll('input[name="asiste_centro_cuidado"]');
                    radios25.forEach(rb => rb.checked = false);
                }, 300);
            }
        }

        // Función para la pregunta 25: Si "Sí" → pregunta 26, Si "No" → habilitar continuar
        function handlePregunta25(radio) {
            const pregunta26 = document.getElementById('pregunta26');

            if (radio.value === 'si') {
                pregunta26.classList.remove('question-hidden');
                pregunta26.classList.add('question-visible', 'fade-in-up');
            } else {
                pregunta26.classList.remove('question-visible', 'fade-in-up');
                pregunta26.classList.add('question-hidden');

                // Limpiar el campo de la pregunta 26 si se oculta
                setTimeout(() => {
                    const input26 = pregunta26.querySelector('input[name="edad_ingreso_escuela"]');
                    if (input26) input26.value = '';
                }, 300);
            }
        }

        // Función para la pregunta 29: Si "Otro" → mostrar campo de texto
        function handlePregunta29(radio) {
            const otroCentroEducativoInput = document.getElementById('otroCentroEducativoInput');

            if (radio.value === 'otro') {
                otroCentroEducativoInput.classList.remove('question-hidden');
                otroCentroEducativoInput.classList.add('question-visible', 'fade-in-up');
            } else {
                otroCentroEducativoInput.classList.remove('question-visible', 'fade-in-up');
                otroCentroEducativoInput.classList.add('question-hidden');
                otroCentroEducativoInput.value = '';
            }
        }

        // Función para la pregunta 30: Si "Otro" → mostrar campo de texto
        function handlePregunta30(select) {
            const otroCaracteristicasInput = document.getElementById('otroCaracteristicasInput');

            if (select.value === 'otro') {
                otroCaracteristicasInput.classList.remove('question-hidden');
                otroCaracteristicasInput.classList.add('question-visible', 'fade-in-up');
            } else {
                otroCaracteristicasInput.classList.remove('question-visible', 'fade-in-up');
                otroCaracteristicasInput.classList.add('question-hidden');
                otroCaracteristicasInput.value = '';
            }
        }

        // Función para la pregunta 40: Si "Sí" → pregunta 41, Si "No" → habilitar guardar
        function handlePregunta40(radio) {
            const pregunta41 = document.getElementById('pregunta41');

            if (radio.value === 'si') {
                pregunta41.classList.remove('question-hidden');
                pregunta41.classList.add('question-visible', 'fade-in-up');
            } else {
                pregunta41.classList.remove('question-visible', 'fade-in-up');
                pregunta41.classList.add('question-hidden');

                // Limpiar el campo de la pregunta 41 si se oculta
                setTimeout(() => {
                    const radios41 = pregunta41.querySelectorAll('input[name="tipo_red_apoyo"]');
                    radios41.forEach(rb => rb.checked = false);
                }, 300);
            }
        }


        // LIMPIAR MENSAJES DE ERROR PREVIOS
        const clearValidationErrors = () => {
            const formularioActual = document.getElementById(`form${currentStep}`);

            // Remover bordes rojos
            formularioActual.querySelectorAll('.border-red-500').forEach(element => {
                element.classList.remove('border-red-500');
                element.classList.add('border');
            });

            // Remover mensajes de error
            formularioActual.querySelectorAll('.error-message').forEach(element => element.remove());
        };

        // MOSTRAR ERROR EN UN BLOQUE ESPECÍFICO
        const mostrarError = (questionBlock, message) => {
            // Agregar borde rojo a los campos
            const campos = questionBlock.querySelectorAll('input, textarea, select');
            campos.forEach(field => {
                field.classList.add('border-red-500');
            });

            // Crear mensaje de error
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message text-red-500 text-sm mt-2 font-medium';
            errorDiv.innerHTML = `⚠️ ${message}`;

            // Insertar el mensaje al final del bloque
            questionBlock.appendChild(errorDiv);
        };

        // VALIDACIÓN MEJORADA CON ERRORES VISUALES Y LÓGICA CONDICIONAL
        const validarFormularioActual = () => {
            const formularioActual = document.getElementById(`form${currentStep}`);
            let isValid = true;

            // Limpiar errores previos
            clearValidationErrors();

            // Obtener todos los bloques de preguntas (divs que contienen campos) QUE ESTÉN VISIBLES
            const questionBlocks = Array.from(formularioActual.children).filter(child =>
                child.tagName === 'DIV' &&
                (child.querySelector('input, textarea, select')) &&
                !child.classList.contains('question-hidden') // Solo validar elementos visibles
            );

            questionBlocks.forEach(block => {
                let blockIsValid = true;
                let errorMessage = '';

                // 1. VALIDAR TEXTAREAS
                const textarea = block.querySelector('textarea');
                if (textarea && !textarea.value.trim()) {
                    blockIsValid = false;
                    errorMessage = 'Este campo de texto es obligatorio';
                }

                // 2. VALIDAR INPUTS DE TEXTO, NÚMERO Y FECHA
                const textInput = block.querySelector('input[type="text"], input[type="number"], input[type="date"]');
                if (textInput && !textInput.value.trim()) {
                    blockIsValid = false;
                    errorMessage = 'Este campo es obligatorio';
                }

                // 3. VALIDAR RADIO BUTTONS
                const radios = block.querySelectorAll('input[type="radio"]');
                if (radios.length > 0) {
                    const isChecked = Array.from(radios).some(radio => radio.checked);
                    if (!isChecked) {
                        blockIsValid = false;
                        errorMessage = 'Debe seleccionar una opción';
                    }
                }

                // 4. VALIDAR CHECKBOXES
                const checkboxes = block.querySelectorAll('input[type="checkbox"]');
                if (checkboxes.length > 0) {
                    const isChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);
                    if (!isChecked) {
                        blockIsValid = false;
                        errorMessage = 'Debe seleccionar al menos una opción';
                    }
                }

                // 5. VALIDAR SELECTS
                const select = block.querySelector('select');
                if (select && (!select.value || select.value === '')) {
                    blockIsValid = false;
                    errorMessage = 'Debe seleccionar una opción del menú';
                }                // Si el bloque no es válido, mostrar error
                if (!blockIsValid) {
                    mostrarError(block, errorMessage);
                    isValid = false;
                }
            });

            return isValid;
        };

        // ACTUALIZAR LA VISUALIZACIÓN DE LOS PASOS
        const updateSteps = () => {
            // Mostrar/ocultar formularios según el paso actual con animación
            document.querySelectorAll('.form-step').forEach((form, index) => {
                if (index + 1 === currentStep) {
                    form.classList.remove('hidden');
                    // Agregar animación de entrada
                    setTimeout(() => {
                        form.classList.add('slide-in');
                    }, 10);
                } else {
                    form.classList.add('hidden');
                    form.classList.remove('slide-in');
                }
            });

            // Actualizar el estilo de las pestañas
            document.querySelectorAll('.step').forEach((el, index) => {
                if (index + 1 === currentStep) {
                    // Pestaña activa
                    el.classList.remove('bg-gray-100', 'text-gray-600', 'border-transparent');
                    el.classList.add('bg-white', 'text-[#536de5]', 'border-[#536de5]', 'font-semibold', 'active');
                } else {
                    // Pestañas inactivas
                    el.classList.remove('bg-white', 'text-[#536de5]', 'border-[#536de5]', 'font-semibold', 'active');
                    el.classList.add('bg-gray-100', 'text-gray-600', 'border-transparent');
                }
            });

            // Ocultar el botón "Anterior" en el primer paso
            document.getElementById('prevBtn').style.display = currentStep === 1 ? 'none' : 'block';

            // Cambiar el texto del botón en el último paso
            document.getElementById('nextBtn').textContent = currentStep === totalSteps ? 'Enviar' : 'Continuar';

            // Limpiar errores al cambiar de paso
            clearValidationErrors();

            // Scroll suave al inicio del formulario
            window.scrollTo({ top: 0, behavior: 'smooth' });
        };

        // BOTÓN SIGUIENTE CON VALIDACIÓN VISUAL
        document.getElementById('nextBtn').addEventListener('click', (event) => {
            event.preventDefault();

            if (validarFormularioActual()) {
                if (currentStep < totalSteps) {
                    currentStep++;
                    updateSteps();
                } else {
                    alert('✅ Formulario completado exitosamente');
                    // Aquí puedes enviar el formulario
                }
            }
        });

        // BOTÓN ANTERIOR
        document.getElementById('prevBtn').addEventListener('click', (event) => {
            event.preventDefault();
            if (currentStep > 1) {
                currentStep--;
                updateSteps();
            }
        });

        // INICIALIZACIÓN
        updateSteps();
    </script>
</body>

</html>